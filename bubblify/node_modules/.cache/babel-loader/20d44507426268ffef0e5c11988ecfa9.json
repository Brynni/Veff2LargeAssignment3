{"ast":null,"code":"var _jsxFileName = \"/Users/vessib/Desktop/Veff2LargeAssignment3/bubblify/src/components/BubbleItemDetails/index.js\";\nimport React from 'react';\nimport BubbleList from '../BubbleList';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass BubbleItemDetails extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: true,\n      bubbles: []\n    };\n  }\n\n  async componentDidMount() {\n    const bubbleId = this.props.match.params.bubbleItemId;\n    const url = `http://localhost:3500/api/bubbles/${bubbleId}`;\n    const response = await fetch(url);\n    const data = await response.json();\n    this.setState({\n      bubbles: [data]\n    });\n    this.setState({\n      loading: false\n    });\n  }\n\n  cartPrompt(bubbleName) {\n    if (window.confirm(`${bubbleName} has been added to cart! Proceed to checkout?!`)) {\n      this.setState({\n        redirect: true\n      });\n    }\n  }\n\n  addItemToCart(id) {\n    let shoppingCart = localStorage.getItem('shoppingCart');\n    let myBubbles = this.state.bubbles.filter(n => n.id === id);\n    myBubbles[0].quantity = 1;\n    console.log(myBubbles);\n    let stringifiedBubbles = JSON.stringify(myBubbles);\n\n    if (shoppingCart === null) {\n      localStorage.setItem('shoppingCart', stringifiedBubbles);\n    } else {\n      let shoppingCartObject = JSON.parse(shoppingCart);\n      let itemFound = false;\n\n      for (let key in shoppingCartObject) {\n        if (shoppingCartObject[key].id === id) {\n          shoppingCartObject[key].quantity++;\n          itemFound = true;\n        }\n      }\n\n      if (itemFound === false) {\n        shoppingCartObject.push(myBubbles[0]);\n      }\n\n      localStorage.setItem('shoppingCart', JSON.stringify(shoppingCartObject));\n    }\n\n    this.cartPrompt(myBubbles[0].name);\n  }\n\n  render() {\n    const {\n      bubbles\n    } = this.state; //console.log(this.props);\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: this.state.loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(BubbleList, {\n          bubbles: bubbles,\n          addItemToCart: id => this.addItemToCart(id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\n;\nexport default BubbleItemDetails;","map":{"version":3,"sources":["/Users/vessib/Desktop/Veff2LargeAssignment3/bubblify/src/components/BubbleItemDetails/index.js"],"names":["React","BubbleList","BubbleItemDetails","Component","state","loading","bubbles","componentDidMount","bubbleId","props","match","params","bubbleItemId","url","response","fetch","data","json","setState","cartPrompt","bubbleName","window","confirm","redirect","addItemToCart","id","shoppingCart","localStorage","getItem","myBubbles","filter","n","quantity","console","log","stringifiedBubbles","JSON","stringify","setItem","shoppingCartObject","parse","itemFound","key","push","name","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport BubbleList from '../BubbleList'\n\nclass BubbleItemDetails extends React.Component {\n    state = {\n        loading: true,\n        bubbles: [],\n    };\n    \n    async componentDidMount() {\n        const bubbleId = this.props.match.params.bubbleItemId;\n        const url = `http://localhost:3500/api/bubbles/${bubbleId}`;     \n        const response = await fetch(url);\n        const data = await response.json()\n        this.setState({ bubbles: [data] });\n        this.setState({loading: false });\n    };\n\n    cartPrompt(bubbleName) {\n        if (window.confirm(`${bubbleName} has been added to cart! Proceed to checkout?!`)) {\n            this.setState({redirect: true });\n        } \n    }\n\n    addItemToCart(id) {\n        let shoppingCart = localStorage.getItem('shoppingCart');\n        let myBubbles = this.state.bubbles.filter(n => n.id === id);\n        myBubbles[0].quantity = 1;\n        console.log(myBubbles);\n        let stringifiedBubbles =  JSON.stringify(myBubbles);\n        if (shoppingCart === null)\n        {\n            localStorage.setItem('shoppingCart', stringifiedBubbles);\n        }\n        else {\n            let shoppingCartObject = JSON.parse(shoppingCart);\n            let itemFound = false;\n            for (let key in shoppingCartObject) {\n                if (shoppingCartObject[key].id === id)\n                {\n                    shoppingCartObject[key].quantity++;\n                    itemFound = true; \n                }\n            }\n            if (itemFound === false){\n                shoppingCartObject.push(myBubbles[0]);\n            }\n            localStorage.setItem('shoppingCart', JSON.stringify(shoppingCartObject));\n\n\n            \n        }\n        this.cartPrompt(myBubbles[0].name);\n      }\n\n    render() {\n        const { bubbles } = this.state;\n        //console.log(this.props);\n        return (\n            <div>\n                {this.state.loading ? \n                    <div>loading</div> \n                    : \n                    <div>\n                    <BubbleList \n                        bubbles = { bubbles } \n                        addItemToCart={ id => this.addItemToCart(id) } \n                        />    \n                </div>  }\n            </div>\n        )\n        \n    }\n};\n\nexport default BubbleItemDetails;"]},"metadata":{},"sourceType":"module"}