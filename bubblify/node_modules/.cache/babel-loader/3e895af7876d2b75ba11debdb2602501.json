{"ast":null,"code":"var _jsxFileName = \"/Users/vessib/Desktop/Veff2LargeAssignment3/bubblify/src/components/Bundles/index.js\";\nimport React from 'react';\nimport BundleList from './../BundleList';\nimport { getBubbleBundles, getBubbles } from '../../services/bundleService';\nimport { Redirect } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Bundles extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: true,\n      redirect: false,\n      bundles: [],\n      bubbles: []\n    };\n  }\n\n  async componentDidMount() {\n    const bundles = await getBubbleBundles();\n    const bundlesArr = [];\n\n    for (const key of Object.keys(bundles)) {\n      bundlesArr.push(bundles[key]);\n    }\n\n    ;\n    const bubbles = await getBubbles();\n    this.setState({\n      bundles: bundlesArr,\n      loading: false,\n      bubbles: bubbles\n    });\n  }\n\n  cartPrompt(bubbleName) {\n    if (window.confirm(`${bubbleName} has been added to cart! Proceed to checkout?!`)) {\n      this.setState({\n        redirect: true\n      });\n    }\n  }\n\n  addItemToCart(id) {\n    let shoppingCart = localStorage.getItem('shoppingCart');\n    let myBubbles = this.state.bubbles.filter(n => n.id === id);\n    myBubbles[0].quantity = 1;\n    console.log(myBubbles);\n    let stringifiedBubbles = JSON.stringify(myBubbles);\n\n    if (shoppingCart === null) {\n      localStorage.setItem('shoppingCart', stringifiedBubbles);\n    } else {\n      let shoppingCartObject = JSON.parse(shoppingCart);\n      let itemFound = false;\n\n      for (let key in shoppingCartObject) {\n        if (shoppingCartObject[key].id === id) {\n          shoppingCartObject[key].quantity++;\n          itemFound = true;\n        }\n      }\n\n      if (itemFound === false) {\n        shoppingCartObject.push(myBubbles[0]);\n      }\n\n      localStorage.setItem('shoppingCart', JSON.stringify(shoppingCartObject));\n    }\n\n    this.cartPrompt(myBubbles[0].name);\n  }\n\n  render() {\n    const {\n      bundles\n    } = this.state;\n\n    if (this.state.redirect) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/cart/checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 20\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: this.state.loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(BundleList, {\n          bundles: bundles,\n          addItemToCart: id => this.addItemToCart(id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 23\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/vessib/Desktop/Veff2LargeAssignment3/bubblify/src/components/Bundles/index.js"],"names":["React","BundleList","getBubbleBundles","getBubbles","Redirect","Bundles","Component","state","loading","redirect","bundles","bubbles","componentDidMount","bundlesArr","key","Object","keys","push","setState","cartPrompt","bubbleName","window","confirm","addItemToCart","id","shoppingCart","localStorage","getItem","myBubbles","filter","n","quantity","console","log","stringifiedBubbles","JSON","stringify","setItem","shoppingCartObject","parse","itemFound","name","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport BundleList from './../BundleList';\nimport { getBubbleBundles, getBubbles } from '../../services/bundleService';\nimport { Redirect } from 'react-router-dom'\n\nexport default class Bundles extends React.Component {\n    state = {\n        loading: true,\n        redirect: false,\n        bundles: [],\n        bubbles: []\n    };\n\n    async componentDidMount() {\n        const bundles = await getBubbleBundles();\n        const bundlesArr = [];\n        for (const key of Object.keys(bundles)) {\n            bundlesArr.push(bundles[key]);\n        };\n        const bubbles = await getBubbles();\n\n        this.setState({ bundles: bundlesArr, loading: false, bubbles: bubbles});\n\n    };\n\n\n      cartPrompt(bubbleName) {\n        if (window.confirm(`${bubbleName} has been added to cart! Proceed to checkout?!`)) {\n            this.setState({redirect: true });\n        } \n    };\n    \n     addItemToCart(id) {\n        let shoppingCart = localStorage.getItem('shoppingCart');\n        let myBubbles = this.state.bubbles.filter(n => n.id === id);\n        myBubbles[0].quantity = 1;\n        console.log(myBubbles);\n        let stringifiedBubbles =  JSON.stringify(myBubbles);\n        if (shoppingCart === null)\n        {\n            localStorage.setItem('shoppingCart', stringifiedBubbles);\n        }\n        else {\n            let shoppingCartObject = JSON.parse(shoppingCart);\n            let itemFound = false;\n            for (let key in shoppingCartObject) {\n                if (shoppingCartObject[key].id === id)\n                {\n                    shoppingCartObject[key].quantity++;\n                    itemFound = true; \n                }\n            }\n            if (itemFound === false){\n                shoppingCartObject.push(myBubbles[0]);\n            }\n            localStorage.setItem('shoppingCart', JSON.stringify(shoppingCartObject));\n    \n    \n            \n        }\n        this.cartPrompt(myBubbles[0].name);\n      };\n\n    \n\n    render() {\n        const { bundles } = this.state;\n        \n        if (this.state.redirect) {\n            return <Redirect to='/cart/checkout' />;\n        }\n\n        return (\n            <div>\n                {this.state.loading ? \n                    <div>loading</div> \n                    : <div>\n                        <BundleList bundles= { bundles } \n                        addItemToCart={ id => this.addItemToCart(id) }/>    \n                    </div>}\n            </div>\n        );\n    };\n}"]},"metadata":{},"sourceType":"module"}