{"ast":null,"code":"var _jsxFileName = \"/Users/vessib/Desktop/Veff2LargeAssignment3/bubblify/src/components/BundleItemDetails/index.js\";\nimport React from 'react';\nimport { getBubbles, getSingleBundle } from '../../services/bundleService';\nimport BubbleList from '../BubbleList';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass BundleItemDetails extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: true,\n      bundle: {},\n      bubbles: []\n    };\n  }\n\n  async componentDidMount() {\n    const bundleId = this.props.match.params.bundleItemId;\n    const url = `http://localhost:3500/api/bundles/${bundleId}`;\n    const response = await fetch(url);\n    const bundles = await response.json();\n    const bubbles = await getBubbles();\n    const currBundle = getSingleBundle(bundles, bubbles);\n    let bundle = {};\n\n    for (const key of Object.keys(currBundle)) {\n      bundle = currBundle[key];\n    }\n\n    ;\n    this.setState({\n      bundle: bundle,\n      bubbles: bubbles,\n      loading: false\n    });\n  }\n\n  cartPrompt(bubbleName) {\n    if (window.confirm(`${bubbleName} has been added to cart! Proceed to checkout?!`)) {\n      this.setState({\n        redirect: true\n      });\n    }\n  }\n\n  addItemToCart(id) {\n    console.log(this.state.bubbles);\n    let shoppingCart = localStorage.getItem('shoppingCart');\n    let myBubbles = this.state.bubbles.filter(n => n.id === id);\n    myBubbles[0].quantity = 1; //console.log(myBubbles);\n\n    let stringifiedBubbles = JSON.stringify(myBubbles);\n\n    if (shoppingCart === null) {\n      localStorage.setItem('shoppingCart', stringifiedBubbles);\n    } else {\n      let shoppingCartObject = JSON.parse(shoppingCart);\n      let itemFound = false;\n\n      for (let key in shoppingCartObject) {\n        if (shoppingCartObject[key].id === id) {\n          shoppingCartObject[key].quantity++;\n          itemFound = true;\n        }\n      }\n\n      if (itemFound === false) {\n        shoppingCartObject.push(myBubbles[0]);\n      }\n\n      localStorage.setItem('shoppingCart', JSON.stringify(shoppingCartObject));\n    }\n\n    this.cartPrompt(myBubbles[0].name);\n  }\n\n  render() {\n    console.log(this.state.bubbles);\n    const {\n      name,\n      bubbles\n    } = this.state.bundle;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: this.state.loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card card-body bg-light bubble\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"bubble-name text-primary\",\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bubbles\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(BubbleList, {\n            bubbles: bubbles,\n            addItemToCart: this.addItemToCart\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 47\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 23\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\n;\nexport default BundleItemDetails;","map":{"version":3,"sources":["/Users/vessib/Desktop/Veff2LargeAssignment3/bubblify/src/components/BundleItemDetails/index.js"],"names":["React","getBubbles","getSingleBundle","BubbleList","BundleItemDetails","Component","state","loading","bundle","bubbles","componentDidMount","bundleId","props","match","params","bundleItemId","url","response","fetch","bundles","json","currBundle","key","Object","keys","setState","cartPrompt","bubbleName","window","confirm","redirect","addItemToCart","id","console","log","shoppingCart","localStorage","getItem","myBubbles","filter","n","quantity","stringifiedBubbles","JSON","stringify","setItem","shoppingCartObject","parse","itemFound","push","name","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { getBubbles, getSingleBundle } from '../../services/bundleService';\nimport BubbleList from '../BubbleList';\n\nclass BundleItemDetails extends React.Component {\n    state = {\n        loading: true,\n        bundle: {},\n        bubbles: []\n    };\n    \n    async componentDidMount() {\n        const bundleId = this.props.match.params.bundleItemId;\n        const url = `http://localhost:3500/api/bundles/${bundleId}`; \n        const response = await fetch(url);\n        const bundles = await response.json()\n        const bubbles = await getBubbles();\n        const currBundle = getSingleBundle(bundles, bubbles);\n        let bundle = {}\n        for (const key of Object.keys(currBundle)) {\n             bundle = currBundle[key];\n        };\n        \n\n        this.setState({ bundle: bundle, bubbles: bubbles,loading: false, });\n\n    };\n\n    cartPrompt(bubbleName) {\n        if (window.confirm(`${bubbleName} has been added to cart! Proceed to checkout?!`)) {\n            this.setState({redirect: true });\n        } \n    };\n    \n     addItemToCart(id) {\n         console.log(this.state.bubbles);\n        let shoppingCart = localStorage.getItem('shoppingCart');\n        let myBubbles = this.state.bubbles.filter(n => n.id === id);\n        myBubbles[0].quantity = 1;\n        //console.log(myBubbles);\n        let stringifiedBubbles =  JSON.stringify(myBubbles);\n        if (shoppingCart === null)\n        {\n            localStorage.setItem('shoppingCart', stringifiedBubbles);\n        }\n        else {\n            let shoppingCartObject = JSON.parse(shoppingCart);\n            let itemFound = false;\n            for (let key in shoppingCartObject) {\n                if (shoppingCartObject[key].id === id)\n                {\n                    shoppingCartObject[key].quantity++;\n                    itemFound = true; \n                }\n            }\n            if (itemFound === false){\n                shoppingCartObject.push(myBubbles[0]);\n            }\n            localStorage.setItem('shoppingCart', JSON.stringify(shoppingCartObject));\n    \n    \n            \n        }\n        this.cartPrompt(myBubbles[0].name);\n      };\n\n    render() {\n        console.log(this.state.bubbles);\n        const { name, bubbles } = this.state.bundle;\n        return (\n            <div>\n                {this.state.loading ? \n                    <div>loading</div> \n                    : <div className=\"card card-body bg-light bubble\">\n                    <h3 className=\"bubble-name text-primary\">{ name }</h3>\n                    <div className=\"bubbles\"> <BubbleList \n                    bubbles = { bubbles } \n                    addItemToCart = { this.addItemToCart }/> </div>\n                </div>}\n            </div>\n        )\n    }\n};\n\nexport default BundleItemDetails;"]},"metadata":{},"sourceType":"module"}