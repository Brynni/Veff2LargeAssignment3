{"ast":null,"code":"var _jsxFileName = \"/Users/vessib/Desktop/Veff2LargeAssignment3/bubblify/src/components/BundleItemDetails/index.js\";\nimport React from 'react';\nimport { getBubbles, getSingleBundle } from '../../services/bundleService';\nimport BubbleList from '../BubbleList';\nimport { Redirect } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass BundleItemDetails extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: true,\n      bundle: {},\n      bubbles: []\n    };\n  }\n\n  async componentDidMount() {\n    const bundleId = this.props.match.params.bundleItemId;\n    const url = `http://localhost:3500/api/bundles/${bundleId}`;\n    const response = await fetch(url);\n    const bundles = await response.json();\n    const bubbles = await getBubbles();\n    const currBundle = getSingleBundle(bundles, bubbles);\n    let bundle = {};\n\n    for (const key of Object.keys(currBundle)) {\n      bundle = currBundle[key];\n    }\n\n    ;\n    this.setState({\n      bundle: bundle,\n      bubbles: bubbles,\n      loading: false\n    });\n    console.log(this.state);\n  }\n\n  cartPrompt(bubbleName) {\n    if (window.confirm(`${bubbleName} has been added to cart! Proceed to checkout?!`)) {\n      this.setState({\n        redirect: true\n      });\n    }\n  }\n\n  addItemToCart(id) {\n    let shoppingCart = localStorage.getItem('shoppingCart');\n    let myBubbles = this.state.bubbles.filter(n => n.id === id);\n    myBubbles[0].quantity = 1; //console.log(myBubbles);\n\n    let stringifiedBubbles = JSON.stringify(myBubbles);\n\n    if (shoppingCart === null) {\n      localStorage.setItem('shoppingCart', stringifiedBubbles);\n    } else {\n      let shoppingCartObject = JSON.parse(shoppingCart);\n      let itemFound = false;\n\n      for (let key in shoppingCartObject) {\n        if (shoppingCartObject[key].id === id) {\n          shoppingCartObject[key].quantity++;\n          itemFound = true;\n        }\n      }\n\n      if (itemFound === false) {\n        shoppingCartObject.push(myBubbles[0]);\n      }\n\n      localStorage.setItem('shoppingCart', JSON.stringify(shoppingCartObject));\n    }\n\n    this.cartPrompt(myBubbles[0].name);\n  }\n\n  render() {\n    console.log(this.state.bubbles);\n    const {\n      name,\n      bubbles\n    } = this.state.bundle;\n\n    if (this.state.redirect) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/cart/checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 20\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: this.state.loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card card-body bg-light bubble\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"bubble-name text-primary\",\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bubbles\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(BubbleList, {\n            bubbles: bubbles,\n            addItemToCart: id => this.addItemToCart(id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 47\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 23\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\n;\nexport default BundleItemDetails;","map":{"version":3,"sources":["/Users/vessib/Desktop/Veff2LargeAssignment3/bubblify/src/components/BundleItemDetails/index.js"],"names":["React","getBubbles","getSingleBundle","BubbleList","Redirect","BundleItemDetails","Component","state","loading","bundle","bubbles","componentDidMount","bundleId","props","match","params","bundleItemId","url","response","fetch","bundles","json","currBundle","key","Object","keys","setState","console","log","cartPrompt","bubbleName","window","confirm","redirect","addItemToCart","id","shoppingCart","localStorage","getItem","myBubbles","filter","n","quantity","stringifiedBubbles","JSON","stringify","setItem","shoppingCartObject","parse","itemFound","push","name","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { getBubbles, getSingleBundle } from '../../services/bundleService';\nimport BubbleList from '../BubbleList';\nimport { Redirect } from 'react-router-dom'\n\nclass BundleItemDetails extends React.Component {\n    state = {\n        loading: true,\n        bundle: {},\n        bubbles: []\n    };\n    \n    async componentDidMount() {\n        const bundleId = this.props.match.params.bundleItemId;\n        const url = `http://localhost:3500/api/bundles/${bundleId}`; \n        const response = await fetch(url);\n        const bundles = await response.json()\n        const bubbles = await getBubbles();\n        const currBundle = getSingleBundle(bundles, bubbles);\n        let bundle = {}\n        for (const key of Object.keys(currBundle)) {\n             bundle = currBundle[key];\n        };\n        \n        \n        this.setState({ bundle: bundle, bubbles: bubbles,loading: false, });\n        console.log(this.state);\n\n    };\n\n    cartPrompt(bubbleName) {\n        if (window.confirm(`${bubbleName} has been added to cart! Proceed to checkout?!`)) {\n            this.setState({redirect: true });\n        } \n    };\n    \n      addItemToCart(id) {\n        let shoppingCart = localStorage.getItem('shoppingCart');\n        let myBubbles = this.state.bubbles.filter(n => n.id === id);\n        myBubbles[0].quantity = 1;\n        //console.log(myBubbles);\n        let stringifiedBubbles =  JSON.stringify(myBubbles);\n        if (shoppingCart === null)\n        {\n            localStorage.setItem('shoppingCart', stringifiedBubbles);\n        }\n        else {\n            let shoppingCartObject = JSON.parse(shoppingCart);\n            let itemFound = false;\n            for (let key in shoppingCartObject) {\n                if (shoppingCartObject[key].id === id)\n                {\n                    shoppingCartObject[key].quantity++;\n                    itemFound = true; \n                }\n            }\n            if (itemFound === false){\n                shoppingCartObject.push(myBubbles[0]);\n            }\n            localStorage.setItem('shoppingCart', JSON.stringify(shoppingCartObject));\n    \n    \n            \n        }\n        this.cartPrompt(myBubbles[0].name);\n      };\n\n    render() {\n        console.log(this.state.bubbles);\n        const { name, bubbles } = this.state.bundle;\n        \n        if (this.state.redirect) {\n            return <Redirect to='/cart/checkout' />;\n        }\n\n        return (\n            <div>\n                {this.state.loading ? \n                    <div>loading</div> \n                    : <div className=\"card card-body bg-light bubble\">\n                    <h3 className=\"bubble-name text-primary\">{ name }</h3>\n                    <div className=\"bubbles\"> <BubbleList \n                    bubbles = { bubbles } \n                    addItemToCart = {id => this.addItemToCart(id)}/> </div>\n                </div>}\n            </div>\n        )\n    }\n};\n\nexport default BundleItemDetails;"]},"metadata":{},"sourceType":"module"}