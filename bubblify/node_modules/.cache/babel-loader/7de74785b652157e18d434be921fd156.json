{"ast":null,"code":"var _jsxFileName = \"/Users/vessib/Desktop/Veff2LargeAssignment3/bubblify/src/components/Bubbles/index.js\";\nimport React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport BubbleList from './../BubbleList';\nimport { PropTypes } from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Bubbles extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: true,\n      redirect: false,\n      bubbles: []\n    };\n  }\n\n  async componentDidMount() {\n    const url = \"http://localhost:3500/api/bubbles\";\n    const response = await fetch(url);\n    const data = await response.json();\n    this.setState({\n      bubbles: data\n    });\n    this.setState({\n      loading: false\n    });\n    console.log(this.state);\n  }\n\n  cartPrompt(bubbleName) {\n    if (window.confirm(`${bubbleName} has been added to cart! Proceed to checkout?!`)) {\n      this.setState({\n        redirect: true\n      });\n    }\n  }\n\n  addItemToCart(id) {\n    let shoppingCart = localStorage.getItem('shoppingCart');\n    let myBubbles = this.state.bubbles.filter(n => n.id === id);\n    myBubbles[0].quantity = 1;\n    console.log(myBubbles);\n    let stringifiedBubbles = JSON.stringify(myBubbles);\n\n    if (shoppingCart === null) {\n      localStorage.setItem('shoppingCart', stringifiedBubbles);\n    } else {\n      let shoppingCartObject = JSON.parse(shoppingCart);\n      let itemFound = false;\n\n      for (let key in shoppingCartObject) {\n        if (shoppingCartObject[key].id === id) {\n          shoppingCartObject[key].quantity++;\n          itemFound = true;\n        }\n      }\n\n      if (itemFound === false) {\n        shoppingCartObject.push(myBubbles[0]);\n      }\n\n      localStorage.setItem('shoppingCart', JSON.stringify(shoppingCartObject));\n    }\n\n    this.cartPrompt(myBubbles[0].name);\n  }\n\n  render() {\n    const {\n      bubbles,\n      addItemToCart\n    } = this.props.Bubbles;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: this.state.loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }, this) : this.state.redirect ? /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(BubbleList, {\n          bubbles: bubbles,\n          addItemToCart: id => this.addItemToCart(id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this);\n  }\n\n}\nBubbles.PropTypes = {\n  bubbles: PropTypes.array.isRequired,\n  addItemToCart: PropTypes.function.isRequired\n};","map":{"version":3,"sources":["/Users/vessib/Desktop/Veff2LargeAssignment3/bubblify/src/components/Bubbles/index.js"],"names":["React","Redirect","BubbleList","PropTypes","Bubbles","Component","state","loading","redirect","bubbles","componentDidMount","url","response","fetch","data","json","setState","console","log","cartPrompt","bubbleName","window","confirm","addItemToCart","id","shoppingCart","localStorage","getItem","myBubbles","filter","n","quantity","stringifiedBubbles","JSON","stringify","setItem","shoppingCartObject","parse","itemFound","key","push","name","render","props","array","isRequired","function"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Redirect } from 'react-router-dom'\nimport BubbleList from './../BubbleList';\nimport { PropTypes } from 'prop-types';\n\nexport default class Bubbles extends React.Component {\n    state = {\n        loading: true,\n        redirect: false,\n        bubbles: [],\n    };\n\n    async componentDidMount() {\n        const url = \"http://localhost:3500/api/bubbles\";\n        const response = await fetch(url);\n        const data = await response.json()\n        this.setState({ bubbles: data });\n        this.setState({loading: false });\n        console.log(this.state);\n    };\n\n    cartPrompt(bubbleName) {\n        if (window.confirm(`${bubbleName} has been added to cart! Proceed to checkout?!`)) {\n            this.setState({redirect: true });\n        } \n    }\n\n    addItemToCart(id) {\n        let shoppingCart = localStorage.getItem('shoppingCart');\n        let myBubbles = this.state.bubbles.filter(n => n.id === id);\n        myBubbles[0].quantity = 1;\n        console.log(myBubbles);\n        let stringifiedBubbles =  JSON.stringify(myBubbles);\n        if (shoppingCart === null)\n        {\n            localStorage.setItem('shoppingCart', stringifiedBubbles);\n        }\n        else {\n            let shoppingCartObject = JSON.parse(shoppingCart);\n            let itemFound = false;\n            for (let key in shoppingCartObject) {\n                if (shoppingCartObject[key].id === id)\n                {\n                    shoppingCartObject[key].quantity++;\n                    itemFound = true; \n                }\n            }\n            if (itemFound === false){\n                shoppingCartObject.push(myBubbles[0]);\n            }\n            localStorage.setItem('shoppingCart', JSON.stringify(shoppingCartObject));\n\n\n            \n        }\n        this.cartPrompt(myBubbles[0].name);\n      }\n    \n\n    render() {\n        const { bubbles, addItemToCart } = this.props.Bubbles;\n        return (\n            <div>\n                {this.state.loading ? \n                    <div>loading</div> \n                    : (\n                        this.state.redirect ? \n                        <Redirect to='/cart' />\n                        :\n                        <div>\n                            <BubbleList \n                                bubbles = { bubbles } \n                                addItemToCart={ id => this.addItemToCart(id) } \n                                />    \n                        </div>\n                    )}\n            </div>\n            \n        );\n    };\n}\n\nBubbles.PropTypes = {\n    bubbles: PropTypes.array.isRequired,\n    addItemToCart: PropTypes.function.isRequired,\n}"]},"metadata":{},"sourceType":"module"}